import{useRef as e,useCallback as t}from"react";function n(e,t,n){return Math.min(Math.max(e,t),n)}function r(e,t="polite"){const n=document.createElement("div");n.setAttribute("role","status"),n.setAttribute("aria-live",t),n.setAttribute("aria-atomic","true"),n.style.position="absolute",n.style.left="-10000px",n.style.width="1px",n.style.height="1px",n.style.overflow="hidden",n.textContent=e,document.body.appendChild(n),setTimeout(()=>{document.body.removeChild(n)},1e3)}function o(e){return 1e3>e?Math.round(e)+" pixels":Math.round(e/10)/100+" thousand pixels"}const i=10,s=50;function a(a){const{direction:c,sizes:u,minSizes:l,maxSizes:d,step:h=i,largeStep:m=s,onResize:y,onResizeEnd:p}=a,f=e(null);return{handleKeyDown:t(e=>t=>{if(!("horizontal"===c?["ArrowLeft","ArrowRight"]:["ArrowUp","ArrowDown"]).includes(t.key)&&"Home"!==t.key&&"End"!==t.key&&"Escape"!==t.key)return;if(t.preventDefault(),"Escape"===t.key){if(f.current){const e=f.current;f.current=null,y&&y(e,{sizes:e,source:"keyboard",originalEvent:t.nativeEvent}),p&&p(e,{sizes:e,source:"keyboard",originalEvent:t.nativeEvent}),r("Pane sizes restored")}return}null===f.current&&(f.current=[...u]);let i=0,s=[...u],a="arrow";switch(t.key){case"ArrowLeft":case"ArrowUp":i=-(t.shiftKey?m:h);break;case"ArrowRight":case"ArrowDown":i=t.shiftKey?m:h;break;case"Home":{a="home";const t=e+1,n=l[e]??0,r=(u[e]??0)+(u[t]??0);s[e]=n,s[t]=r-n;break}case"End":{a="end";const t=e,n=e+1,r=(u[t]??0)+(u[n]??0);s[t]=Math.min(d[t]??1/0,r-(l[n]??0)),s[n]=r-s[t];break}}if(0!==i&&(s=function(e,t,r,o,i){const s=[...e],a=e[t]??0,c=e[t+1]??0,u=o[t+1]??0,l=i[t+1]??1/0;let d=n(a+r,o[t]??0,i[t]??1/0),h=n(c-r,u,l);const m=c-h,y=Math.min(Math.abs(d-a),Math.abs(m));return r>0?(d=a+y,h=c-y):(d=a-y,h=c+y),s[t]=d,s[t+1]=h,s}(u,e,i,l,d)),s=s.map((e,t)=>n(e,l[t]??0,d[t]??1/0)),y&&y(s,{sizes:s,source:"keyboard",originalEvent:t.nativeEvent}),p&&p(s,{sizes:s,source:"keyboard",originalEvent:t.nativeEvent}),"home"===a)r(`Pane ${e+1} minimized to ${o(s[e]??0)}`);else if("end"===a)r(`Pane ${e+1} maximized to ${o(s[e]??0)}`);else{const t=i>0?e:e+1;r(`Pane ${t+1} resized to ${o(s[t]??0)}`)}},[c,u,l,d,h,m,y,p])}}export{a as useKeyboardResize};
//# sourceMappingURL=keyboard.js.map
